{"remainingRequest":"C:\\Users\\cklam\\Documents\\JHU-Covidbot-Web\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\Users\\cklam\\Documents\\JHU-Covidbot-Web\\src\\Components\\Parts\\ChatInput.vue?vue&type=script&lang=js&","dependencies":[{"path":"C:\\Users\\cklam\\Documents\\JHU-Covidbot-Web\\src\\Components\\Parts\\ChatInput.vue","mtime":1626924492167},{"path":"C:\\Users\\cklam\\Documents\\JHU-Covidbot-Web\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\cklam\\Documents\\JHU-Covidbot-Web\\node_modules\\babel-loader\\lib\\index.js","mtime":315532800000},{"path":"C:\\Users\\cklam\\Documents\\JHU-Covidbot-Web\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\cklam\\Documents\\JHU-Covidbot-Web\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KDQppbXBvcnQgQXVkaW9SZWNvcmRlciBmcm9tICJhdWRpby1yZWNvcmRlci1wb2x5ZmlsbCI7DQppbXBvcnQgKiBhcyBoYXJrIGZyb20gImhhcmsiOw0Kd2luZG93Lk1lZGlhUmVjb3JkZXIgPSBBdWRpb1JlY29yZGVyOw0KDQpleHBvcnQgZGVmYXVsdCB7DQogIG5hbWU6ICJDaGF0SW5wdXQiLA0KICBkYXRhKCkgew0KICAgIHJldHVybiB7DQogICAgICBxdWVyeTogIiIsDQogICAgICBtaWNyb3Bob25lOiBmYWxzZSwNCiAgICAgIHJlY29nbml0aW9uOiBudWxsLA0KICAgICAgcmVjb3JkZXI6IG51bGwsDQogICAgICBzaG91bGRfbGlzdGVuOiBmYWxzZSwNCiAgICB9Ow0KICB9LA0KICBjb21wdXRlZDogew0KICAgIC8vIG1pY3JvcGhvbmVfc3VwcG9ydGVkKCkgew0KICAgIC8vICAgcmV0dXJuICgNCiAgICAvLyAgICAgd2luZG93LndlYmtpdFNwZWVjaFJlY29nbml0aW9uIHx8DQogICAgLy8gICAgIHdpbmRvdy5TcGVlY2hSZWNvZ25pdGlvbiB8fA0KICAgIC8vICAgICAhd2luZG93Lk1lZGlhUmVjb3JkZXIubm90U3VwcG9ydGVkDQogICAgLy8gICApOw0KICAgIC8vIH0sDQogIH0sDQogIHdhdGNoOiB7DQogICAgLyogVG9nZ2xlIG1pY3JvcGhvbmUgKi8NCiAgICAvLyBtaWNyb3Bob25lKGFjdGl2YXRlKSB7DQogICAgLy8gICBpZiAoYWN0aXZhdGUpIHsNCiAgICAvLyAgICAgdGhpcy5zaG91bGRfbGlzdGVuID0gdHJ1ZTsNCiAgICAvLyAgICAgaWYgKHdpbmRvdy53ZWJraXRTcGVlY2hSZWNvZ25pdGlvbiB8fCB3aW5kb3cuU3BlZWNoUmVjb2duaXRpb24pIHsNCiAgICAvLyAgICAgICB0aGlzLnJlY29nbml0aW9uID0NCiAgICAvLyAgICAgICAgIG5ldyB3aW5kb3cud2Via2l0U3BlZWNoUmVjb2duaXRpb24oKSB8fA0KICAgIC8vICAgICAgICAgbmV3IHdpbmRvdy5TcGVlY2hSZWNvZ25pdGlvbigpOw0KICAgIC8vICAgICAgIHRoaXMucmVjb2duaXRpb24uaW50ZXJpbVJlc3VsdHMgPSB0cnVlOw0KICAgIC8vICAgICAgIHRoaXMucmVjb2duaXRpb24ubGFuZyA9IHRoaXMubGFuZygpOw0KICAgIC8vICAgICAgIHRoaXMucmVjb2duaXRpb24ub25yZXN1bHQgPSAoZXZlbnQpID0+IHsNCiAgICAvLyAgICAgICAgIGZvciAobGV0IGkgPSBldmVudC5yZXN1bHRJbmRleDsgaSA8IGV2ZW50LnJlc3VsdHMubGVuZ3RoOyArK2kpIHsNCiAgICAvLyAgICAgICAgICAgdGhpcy5xdWVyeSA9IGV2ZW50LnJlc3VsdHNbaV1bMF0udHJhbnNjcmlwdDsgLy8gPC0gcHVzaCByZXN1bHRzIHRvIHRoZSBUZXh0IGlucHV0DQogICAgLy8gICAgICAgICB9DQogICAgLy8gICAgICAgfTsNCiAgICAvLyAgICAgICB0aGlzLnJlY29nbml0aW9uLm9uZW5kID0gKCkgPT4gew0KICAgIC8vICAgICAgICAgdGhpcy5yZWNvZ25pdGlvbi5zdG9wKCk7DQogICAgLy8gICAgICAgICB0aGlzLm1pY3JvcGhvbmUgPSBmYWxzZTsNCiAgICAvLyAgICAgICAgIHRoaXMuc3VibWl0KHsgdGV4dDogdGhpcy5xdWVyeSB9KTsgLy8gPC0gc3VibWl0IHRoZSByZXN1bHQNCiAgICAvLyAgICAgICB9Ow0KICAgIC8vICAgICAgIHRoaXMucmVjb2duaXRpb24ub25lcnJvciA9ICgpID0+ICh0aGlzLm1pY3JvcGhvbmUgPSBmYWxzZSk7DQogICAgLy8gICAgICAgdGhpcy5yZWNvZ25pdGlvbi5zdGFydCgpOw0KICAgIC8vICAgICB9IGVsc2UgaWYgKHdpbmRvdy5NZWRpYVJlY29yZGVyKSB7DQogICAgLy8gICAgICAgaWYgKHdpbmRvdy5NZWRpYVJlY29yZGVyKSB7DQogICAgLy8gICAgICAgICBuYXZpZ2F0b3IubWVkaWFEZXZpY2VzDQogICAgLy8gICAgICAgICAgIC5nZXRVc2VyTWVkaWEoeyBhdWRpbzogdHJ1ZSB9KQ0KICAgIC8vICAgICAgICAgICAudGhlbigoc3RyZWFtKSA9PiB7DQogICAgLy8gICAgICAgICAgICAgdGhpcy5yZWNvcmRlciA9IG5ldyB3aW5kb3cuTWVkaWFSZWNvcmRlcihzdHJlYW0pOw0KICAgIC8vICAgICAgICAgICAgIHRoaXMucmVjb3JkZXIuYWRkRXZlbnRMaXN0ZW5lcigiZGF0YWF2YWlsYWJsZSIsIChyZWNvcmRpbmcpID0+IHsNCiAgICAvLyAgICAgICAgICAgICAgIGNvbnN0IHJlYWRlciA9IG5ldyBGaWxlUmVhZGVyKCk7DQogICAgLy8gICAgICAgICAgICAgICByZWFkZXIucmVhZEFzRGF0YVVSTChyZWNvcmRpbmcuZGF0YSk7DQogICAgLy8gICAgICAgICAgICAgICByZWFkZXIub25sb2FkZW5kID0gKCkgPT4gew0KICAgIC8vICAgICAgICAgICAgICAgICB0aGlzLnN1Ym1pdCh7DQogICAgLy8gICAgICAgICAgICAgICAgICAgYXVkaW86IHJlYWRlci5yZXN1bHQucmVwbGFjZSgvXmRhdGE6Lis7YmFzZTY0LC8sICIiKSwNCiAgICAvLyAgICAgICAgICAgICAgICAgfSk7DQogICAgLy8gICAgICAgICAgICAgICB9Ow0KICAgIC8vICAgICAgICAgICAgIH0pOw0KICAgIC8vICAgICAgICAgICAgIGhhcmsodGhpcy5yZWNvcmRlci5zdHJlYW0pLm9uKA0KICAgIC8vICAgICAgICAgICAgICAgInN0b3BwZWRfc3BlYWtpbmciLA0KICAgIC8vICAgICAgICAgICAgICAgKCkgPT4gKHRoaXMubWljcm9waG9uZSA9IGZhbHNlKQ0KICAgIC8vICAgICAgICAgICAgICk7IC8vIDwtIFNwZWVjaCBlbmQgZGV0ZWN0aW9uDQogICAgLy8gICAgICAgICAgICAgdGhpcy5yZWNvcmRlci5zdGFydCgpOw0KICAgIC8vICAgICAgICAgICB9KQ0KICAgIC8vICAgICAgICAgICAuY2F0Y2goKCkgPT4gKHRoaXMubWljcm9waG9uZSA9IGZhbHNlKSk7DQogICAgLy8gICAgICAgfQ0KICAgIC8vICAgICB9DQogICAgLy8gICB9IGVsc2UgaWYgKHRoaXMucmVjb2duaXRpb24pIHRoaXMucmVjb2duaXRpb24uYWJvcnQoKTsNCiAgICAvLyAgIGVsc2UgaWYgKHRoaXMucmVjb3JkZXIpIHRoaXMucmVjb3JkZXIuc3RvcCgpOw0KICAgIC8vIH0sDQogIH0sDQogIG1ldGhvZHM6IHsNCiAgICBsaXN0ZW4oKSB7DQogICAgICAvLyBpZiAodGhpcy5zaG91bGRfbGlzdGVuKSB0aGlzLm1pY3JvcGhvbmUgPSB0cnVlOw0KICAgIH0sDQogICAgc3VibWl0KHN1Ym1pc3Npb24pIHsNCiAgICAgIGlmIChzdWJtaXNzaW9uLnRleHQgJiYgc3VibWlzc2lvbi50ZXh0Lmxlbmd0aCA+IDApIHsNCiAgICAgICAgdGhpcy4kZW1pdCgic3VibWl0Iiwgc3VibWlzc2lvbik7DQogICAgICAgIHRoaXMucXVlcnkgPSAiIjsNCiAgICAgIH0gDQogICAgICAvLyBlbHNlIGlmIChzdWJtaXNzaW9uLmF1ZGlvKSB0aGlzLiRlbWl0KCJzdWJtaXQiLCBzdWJtaXNzaW9uKTsNCiAgICB9LA0KICB9LA0KfTsNCg=="},{"version":3,"sources":["ChatInput.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA8HA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"ChatInput.vue","sourceRoot":"src/Components/Parts","sourcesContent":["<template>\r\n  <div class=\"bottomchat\">\r\n    <div class=\"container\">\r\n      <!-- Here are the suggestions -->\r\n      <div class=\"suggestions\"><slot /></div>\r\n      <div class=\"flexible\">\r\n        <!-- Text input -->\r\n        <input\r\n          v-model=\"query\"\r\n          class=\"input\"\r\n          type=\"text\"\r\n          autofocus\r\n          :placeholder=\"\r\n            (translations[lang()] && translations[lang()].inputTitle) ||\r\n            translations[config.fallback_lang].inputTitle\r\n          \"\r\n          :aria-label=\"\r\n            (translations[lang()] && translations[lang()].inputTitle) ||\r\n            translations[config.fallback_lang].inputTitle\r\n          \"\r\n          @keypress.enter=\"submit({ text: query })\"\r\n          @focus=\"\r\n            microphone = false;\r\n            should_listen = false;\r\n          \"\r\n        />\r\n\r\n        <!-- Send message button (arrow button) v-if=\"(!microphone && query.length > 0) || !microphone_supported\" -->\r\n        <button\r\n          \r\n          class=\"button\"\r\n          :title=\"\r\n            (translations[lang()] && translations[lang()].sendTitle) ||\r\n            translations[config.fallback_lang].sendTitle\r\n          \"\r\n          :aria-label=\"\r\n            (translations[lang()] && translations[lang()].sendTitle) ||\r\n            translations[config.fallback_lang].sendTitle\r\n          \"\r\n          @click=\"submit({ text: query })\"\r\n        >\r\n          <i class=\"material-icons\" aria-hidden=\"true\">arrow_upward</i>\r\n        </button>\r\n\r\n        <!-- Microphone Button -->\r\n        <!-- <button\r\n          v-else\r\n          class=\"button\"\r\n          :aria-label=\"\r\n            (translations[lang()] && translations[lang()].microphoneTitle) ||\r\n            translations[config.fallback_lang].microphoneTitle\r\n          \"\r\n          :title=\"\r\n            (translations[lang()] && translations[lang()].microphoneTitle) ||\r\n            translations[config.fallback_lang].microphoneTitle\r\n          \"\r\n          :class=\"{ mic_active: microphone }\"\r\n          @click=\"microphone = !microphone\"\r\n        \r\n          <i class=\"material-icons\" aria-hidden=\"true\">mic</i>\r\n        </button> -->\r\n      </div>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<style lang=\"sass\" scoped>\r\n@import '@/Style/Mixins'\r\n\r\n.bottomchat\r\n    position: fixed\r\n    bottom: 0\r\n    left: 0\r\n    width: 100%\r\n    background-color: var(--background)\r\n    padding-bottom: 8px\r\n\r\n.flexible\r\n    display: flex\r\n\r\n.suggestions\r\n    overflow-x: scroll\r\n    overflow-y: hidden\r\n    white-space: nowrap\r\n    -webkit-overflow-scrolling: touch\r\n\r\n    &::-webkit-scrollbar\r\n        display: none\r\n\r\n.input\r\n    margin-left: 5px\r\n    font-size: 16px\r\n    font-weight: 500\r\n    width: 100%\r\n    box-sizing: border-box\r\n    border: none\r\n    padding: 10px 12px\r\n    color: var(--text)\r\n    border-radius: 40px\r\n    flex: 1 0 0\r\n    background-color: var(--element-background)\r\n\r\n    &:focus\r\n        outline: 0 !important\r\n\r\n.button\r\n    @include reset\r\n    padding: 8px\r\n    margin-left: 6px\r\n    margin-right: 5px\r\n    border-radius: 50%\r\n    cursor: pointer\r\n    background-color: var(--element-background)\r\n    color: var(--text)\r\n    font-size: 24px\r\n    display: flex\r\n\r\n    &:focus\r\n        outline: 0 !important\r\n\r\n    &.mic_active\r\n        background-color: #F44336\r\n        color: white\r\n</style>\r\n\r\n<script>\r\nimport AudioRecorder from \"audio-recorder-polyfill\";\r\nimport * as hark from \"hark\";\r\nwindow.MediaRecorder = AudioRecorder;\r\n\r\nexport default {\r\n  name: \"ChatInput\",\r\n  data() {\r\n    return {\r\n      query: \"\",\r\n      microphone: false,\r\n      recognition: null,\r\n      recorder: null,\r\n      should_listen: false,\r\n    };\r\n  },\r\n  computed: {\r\n    // microphone_supported() {\r\n    //   return (\r\n    //     window.webkitSpeechRecognition ||\r\n    //     window.SpeechRecognition ||\r\n    //     !window.MediaRecorder.notSupported\r\n    //   );\r\n    // },\r\n  },\r\n  watch: {\r\n    /* Toggle microphone */\r\n    // microphone(activate) {\r\n    //   if (activate) {\r\n    //     this.should_listen = true;\r\n    //     if (window.webkitSpeechRecognition || window.SpeechRecognition) {\r\n    //       this.recognition =\r\n    //         new window.webkitSpeechRecognition() ||\r\n    //         new window.SpeechRecognition();\r\n    //       this.recognition.interimResults = true;\r\n    //       this.recognition.lang = this.lang();\r\n    //       this.recognition.onresult = (event) => {\r\n    //         for (let i = event.resultIndex; i < event.results.length; ++i) {\r\n    //           this.query = event.results[i][0].transcript; // <- push results to the Text input\r\n    //         }\r\n    //       };\r\n    //       this.recognition.onend = () => {\r\n    //         this.recognition.stop();\r\n    //         this.microphone = false;\r\n    //         this.submit({ text: this.query }); // <- submit the result\r\n    //       };\r\n    //       this.recognition.onerror = () => (this.microphone = false);\r\n    //       this.recognition.start();\r\n    //     } else if (window.MediaRecorder) {\r\n    //       if (window.MediaRecorder) {\r\n    //         navigator.mediaDevices\r\n    //           .getUserMedia({ audio: true })\r\n    //           .then((stream) => {\r\n    //             this.recorder = new window.MediaRecorder(stream);\r\n    //             this.recorder.addEventListener(\"dataavailable\", (recording) => {\r\n    //               const reader = new FileReader();\r\n    //               reader.readAsDataURL(recording.data);\r\n    //               reader.onloadend = () => {\r\n    //                 this.submit({\r\n    //                   audio: reader.result.replace(/^data:.+;base64,/, \"\"),\r\n    //                 });\r\n    //               };\r\n    //             });\r\n    //             hark(this.recorder.stream).on(\r\n    //               \"stopped_speaking\",\r\n    //               () => (this.microphone = false)\r\n    //             ); // <- Speech end detection\r\n    //             this.recorder.start();\r\n    //           })\r\n    //           .catch(() => (this.microphone = false));\r\n    //       }\r\n    //     }\r\n    //   } else if (this.recognition) this.recognition.abort();\r\n    //   else if (this.recorder) this.recorder.stop();\r\n    // },\r\n  },\r\n  methods: {\r\n    listen() {\r\n      // if (this.should_listen) this.microphone = true;\r\n    },\r\n    submit(submission) {\r\n      if (submission.text && submission.text.length > 0) {\r\n        this.$emit(\"submit\", submission);\r\n        this.query = \"\";\r\n      } \r\n      // else if (submission.audio) this.$emit(\"submit\", submission);\r\n    },\r\n  },\r\n};\r\n</script>\r\n"]}]}