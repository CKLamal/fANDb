{"remainingRequest":"C:\\Users\\cklam\\Documents\\JHU-Covidbot-Web\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\Users\\cklam\\Documents\\JHU-Covidbot-Web\\src\\Views\\App.vue?vue&type=script&lang=js&","dependencies":[{"path":"C:\\Users\\cklam\\Documents\\JHU-Covidbot-Web\\src\\Views\\App.vue","mtime":1626850555927},{"path":"C:\\Users\\cklam\\Documents\\JHU-Covidbot-Web\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\cklam\\Documents\\JHU-Covidbot-Web\\node_modules\\babel-loader\\lib\\index.js","mtime":315532800000},{"path":"C:\\Users\\cklam\\Documents\\JHU-Covidbot-Web\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\cklam\\Documents\\JHU-Covidbot-Web\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KDQppbXBvcnQgV2VsY29tZSBmcm9tICIuL1dlbGNvbWUudnVlIjsNCg0KaW1wb3J0IEVycm9yIGZyb20gIkAvQ29tcG9uZW50cy9QYXJ0cy9FcnJvci52dWUiOw0KaW1wb3J0IFRvcEhlYWQgZnJvbSAiQC9Db21wb25lbnRzL1BhcnRzL1RvcEhlYWQudnVlIjsNCmltcG9ydCBDaGF0SW5wdXQgZnJvbSAiQC9Db21wb25lbnRzL1BhcnRzL0NoYXRJbnB1dC52dWUiOw0KDQppbXBvcnQgUmljaENvbXBvbmVudCBmcm9tICJAL0NvbXBvbmVudHMvUmljaC9Db21wb25lbnQudnVlIjsNCmltcG9ydCBCdWJibGUgZnJvbSAiQC9Db21wb25lbnRzL1JpY2gvQnViYmxlLnZ1ZSI7DQppbXBvcnQgQnViYmxlV3JhcHBlciBmcm9tICJAL0NvbXBvbmVudHMvUmljaC9CdWJibGVXcmFwcGVyLnZ1ZSI7DQppbXBvcnQgQ2FyZCBmcm9tICJAL0NvbXBvbmVudHMvUmljaC9DYXJkLnZ1ZSI7DQppbXBvcnQgQ2FyZEJ1dHRvbiBmcm9tICJAL0NvbXBvbmVudHMvUmljaC9DYXJkQnV0dG9uLnZ1ZSI7DQppbXBvcnQgQ2Fyb3VzZWwgZnJvbSAiQC9Db21wb25lbnRzL1JpY2gvQ2Fyb3VzZWwudnVlIjsNCmltcG9ydCBMaXN0IGZyb20gIkAvQ29tcG9uZW50cy9SaWNoL0xpc3QudnVlIjsNCmltcG9ydCBMaXN0SXRlbSBmcm9tICJAL0NvbXBvbmVudHMvUmljaC9MaXN0SXRlbS52dWUiOw0KaW1wb3J0IFBpY3R1cmUgZnJvbSAiQC9Db21wb25lbnRzL1JpY2gvUGljdHVyZS52dWUiOw0KaW1wb3J0IE1lZGlhIGZyb20gIkAvQ29tcG9uZW50cy9SaWNoL01lZGlhLnZ1ZSI7DQppbXBvcnQgVGFibGVDYXJkIGZyb20gIkAvQ29tcG9uZW50cy9SaWNoL1RhYmxlQ2FyZC52dWUiOw0KaW1wb3J0IFN1Z2dlc3Rpb24gZnJvbSAiQC9Db21wb25lbnRzL1JpY2gvU3VnZ2VzdGlvbi52dWUiOw0KDQppbXBvcnQgKiBhcyB1dWlkdjEgZnJvbSAidXVpZC92MSI7DQoNCmltcG9ydCB7IENsaWVudCB9IGZyb20gImRpYWxvZ2Zsb3ctZ2F0ZXdheSI7DQoNCmZ1bmN0aW9uIHVybGlmeSh0ZXh0KSB7DQogIHZhciB1cmxSZWdleCA9IC8oXGIoaHR0cHM/fGZ0cHxmaWxlKTpcL1wvWy1BLVowLTkrJkAjXC8lPz1+X3whOiwuO10qWy1BLVowLTkrJkAjXC8lPX5ffF0pL2dpOw0KICByZXR1cm4gdGV4dC5yZXBsYWNlKHVybFJlZ2V4LCBmdW5jdGlvbiAodXJsKSB7DQogICAgcmV0dXJuICc8YSBjbGFzcz0iYiIgaHJlZj0iJyArIHVybCArICciIHRhcmdldD0iX2JsYW5rIj4nICsgdXJsICsgIjwvYT4iOw0KICB9KTsNCiAgLy8gb3IgYWx0ZXJuYXRpdmVseQ0KICAvLyByZXR1cm4gdGV4dC5yZXBsYWNlKHVybFJlZ2V4LCAnPGEgaHJlZj0iJDEiPiQxPC9hPicpDQp9DQoNCmV4cG9ydCBkZWZhdWx0IHsNCiAgbmFtZTogIkFwcCIsDQogIGNvbXBvbmVudHM6IHsNCiAgICBXZWxjb21lLA0KICAgIEVycm9yLA0KICAgIFRvcEhlYWQsDQogICAgQ2hhdElucHV0LA0KICAgIFJpY2hDb21wb25lbnQsDQogICAgQnViYmxlLA0KICAgIEJ1YmJsZVdyYXBwZXIsDQogICAgQ2FyZCwNCiAgICBDYXJkQnV0dG9uLA0KICAgIENhcm91c2VsLA0KICAgIExpc3QsDQogICAgTGlzdEl0ZW0sDQogICAgUGljdHVyZSwNCiAgICBNZWRpYSwNCiAgICBUYWJsZUNhcmQsDQogICAgU3VnZ2VzdGlvbiwNCiAgfSwNCiAgZGF0YSgpIHsNCiAgICByZXR1cm4gew0KICAgICAgYXBwOiBudWxsLA0KICAgICAgbWVzc2FnZXM6IFtdLA0KICAgICAgbGFuZ3VhZ2U6ICIiLA0KICAgICAgc2Vzc2lvbjogIiIsDQogICAgICBtdXRlZDogdHJ1ZSwNCiAgICAgIGxvYWRpbmc6IGZhbHNlLA0KICAgICAgZXJyb3I6IG51bGwsDQogICAgICBjbGllbnQ6IG5ldyBuZXcgQ2xpZW50KHRoaXMuY29uZmlnLmVuZHBvaW50KS5jb25uZWN0KCksDQogICAgfTsNCiAgfSwNCiAgY29tcHV0ZWQ6IHsNCiAgICAvKiBUaGUgY29kZSBiZWxvdyBpcyB1c2VkIHRvIGV4dHJhY3Qgc3VnZ2VzdGlvbnMgZnJvbSBsYXN0IG1lc3NhZ2UsIHRvIGRpc3BsYXkgaXQgb24gQ2hhdElucHV0ICovDQogICAgc3VnZ2VzdGlvbnMoKSB7DQogICAgICBpZiAodGhpcy5tZXNzYWdlcy5sZW5ndGggPiAwKSB7DQogICAgICAgIGNvbnN0IGxhc3RfbWVzc2FnZSA9IHRoaXMubWVzc2FnZXNbdGhpcy5tZXNzYWdlcy5sZW5ndGggLSAxXTsNCiAgICAgICAgY29uc3Qgc3VnZ2VzdGlvbnMgPSBbXTsNCg0KICAgICAgICAvKiBEaWFsb2dmbG93IFN1Z2dlc3Rpb25zICovDQogICAgICAgIGZvciAoY29uc3QgY29tcG9uZW50IGluIGxhc3RfbWVzc2FnZS5xdWVyeVJlc3VsdC5mdWxmaWxsbWVudE1lc3NhZ2VzKSB7DQogICAgICAgICAgaWYgKA0KICAgICAgICAgICAgbGFzdF9tZXNzYWdlLnF1ZXJ5UmVzdWx0LmZ1bGZpbGxtZW50TWVzc2FnZXNbY29tcG9uZW50XS5zdWdnZXN0aW9ucw0KICAgICAgICAgICkNCiAgICAgICAgICAgIHN1Z2dlc3Rpb25zLnRleHRfc3VnZ2VzdGlvbnMgPSBsYXN0X21lc3NhZ2UucXVlcnlSZXN1bHQuZnVsZmlsbG1lbnRNZXNzYWdlc1sNCiAgICAgICAgICAgICAgY29tcG9uZW50DQogICAgICAgICAgICBdLnN1Z2dlc3Rpb25zLnN1Z2dlc3Rpb25zLm1hcCgoc3VnZ2VzdGlvbikgPT4gc3VnZ2VzdGlvbi50aXRsZSk7DQogICAgICAgICAgaWYgKA0KICAgICAgICAgICAgbGFzdF9tZXNzYWdlLnF1ZXJ5UmVzdWx0LmZ1bGZpbGxtZW50TWVzc2FnZXNbY29tcG9uZW50XQ0KICAgICAgICAgICAgICAubGlua091dFN1Z2dlc3Rpb24NCiAgICAgICAgICApDQogICAgICAgICAgICBzdWdnZXN0aW9ucy5saW5rX3N1Z2dlc3Rpb24gPQ0KICAgICAgICAgICAgICBsYXN0X21lc3NhZ2UucXVlcnlSZXN1bHQuZnVsZmlsbG1lbnRNZXNzYWdlc1sNCiAgICAgICAgICAgICAgICBjb21wb25lbnQNCiAgICAgICAgICAgICAgXS5saW5rT3V0U3VnZ2VzdGlvbjsNCiAgICAgICAgICBpZiAoDQogICAgICAgICAgICBsYXN0X21lc3NhZ2UucXVlcnlSZXN1bHQuZnVsZmlsbG1lbnRNZXNzYWdlc1tjb21wb25lbnRdLnF1aWNrUmVwbGllcw0KICAgICAgICAgICkNCiAgICAgICAgICAgIHN1Z2dlc3Rpb25zLnRleHRfc3VnZ2VzdGlvbnMgPQ0KICAgICAgICAgICAgICBsYXN0X21lc3NhZ2UucXVlcnlSZXN1bHQuZnVsZmlsbG1lbnRNZXNzYWdlc1sNCiAgICAgICAgICAgICAgICBjb21wb25lbnQNCiAgICAgICAgICAgICAgXS5xdWlja1JlcGxpZXMucXVpY2tSZXBsaWVzOw0KICAgICAgICB9DQoNCiAgICAgICAgLyogR29vZ2xlIFN1Z2dlc3Rpb25zICovDQogICAgICAgIGlmICgNCiAgICAgICAgICBsYXN0X21lc3NhZ2UucXVlcnlSZXN1bHQud2ViaG9va1BheWxvYWQgJiYNCiAgICAgICAgICBsYXN0X21lc3NhZ2UucXVlcnlSZXN1bHQud2ViaG9va1BheWxvYWQuZ29vZ2xlDQogICAgICAgICkgew0KICAgICAgICAgIGZvciAoY29uc3QgY29tcG9uZW50IGluIGxhc3RfbWVzc2FnZS5xdWVyeVJlc3VsdC53ZWJob29rUGF5bG9hZA0KICAgICAgICAgICAgLmdvb2dsZSkgew0KICAgICAgICAgICAgaWYgKA0KICAgICAgICAgICAgICBsYXN0X21lc3NhZ2UucXVlcnlSZXN1bHQud2ViaG9va1BheWxvYWQuZ29vZ2xlW2NvbXBvbmVudF0NCiAgICAgICAgICAgICAgICAuc3VnZ2VzdGlvbnMNCiAgICAgICAgICAgICkNCiAgICAgICAgICAgICAgc3VnZ2VzdGlvbnMudGV4dF9zdWdnZXN0aW9ucyA9IGxhc3RfbWVzc2FnZS5xdWVyeVJlc3VsdC53ZWJob29rUGF5bG9hZC5nb29nbGVbDQogICAgICAgICAgICAgICAgY29tcG9uZW50DQogICAgICAgICAgICAgIF0uc3VnZ2VzdGlvbnMubWFwKChzdWdnZXN0aW9uKSA9PiBzdWdnZXN0aW9uLnRpdGxlKTsNCiAgICAgICAgICAgIGlmICgNCiAgICAgICAgICAgICAgbGFzdF9tZXNzYWdlLnF1ZXJ5UmVzdWx0LndlYmhvb2tQYXlsb2FkLmdvb2dsZVtjb21wb25lbnRdDQogICAgICAgICAgICAgICAgLmxpbmtPdXRTdWdnZXN0aW9uDQogICAgICAgICAgICApDQogICAgICAgICAgICAgIHN1Z2dlc3Rpb25zLmxpbmtfc3VnZ2VzdGlvbiA9DQogICAgICAgICAgICAgICAgbGFzdF9tZXNzYWdlLnF1ZXJ5UmVzdWx0LndlYmhvb2tQYXlsb2FkLmdvb2dsZVsNCiAgICAgICAgICAgICAgICAgIGNvbXBvbmVudA0KICAgICAgICAgICAgICAgIF0ubGlua091dFN1Z2dlc3Rpb247DQogICAgICAgICAgfQ0KICAgICAgICB9DQoNCiAgICAgICAgcmV0dXJuIHN1Z2dlc3Rpb25zOw0KICAgICAgfQ0KDQogICAgICByZXR1cm4gew0KICAgICAgICB0ZXh0X3N1Z2dlc3Rpb25zOiB0aGlzLmNvbmZpZy5zdGFydF9zdWdnZXN0aW9ucywgLy8gPC0gaWYgbm8gbWVzc2FnZXMgYXJlIHByZXNlbnQsIHJldHVybiBzdGFydF9zdWdnZXN0aW9ucywgZnJvbSBjb25maWcuanMgdG8gaGVscCB1c2VyIGZpZ3VyZSBvdXQgd2hhdCBoZSBjYW4gZG8gd2l0aCB5b3VyIGFwcGxpY2F0aW9uDQogICAgICB9Ow0KICAgIH0sDQogIH0sDQogIHdhdGNoOiB7DQogICAgLyogVGhpcyBmdW5jdGlvbiBpcyB0cmlnZ2VyZWQsIHdoZW4gbmV3IG1lc3NhZ2VzIGFycml2ZSAqLw0KICAgIG1lc3NhZ2VzKG1lc3NhZ2VzKSB7DQogICAgICBpZiAodGhpcy5oaXN0b3J5KCkpDQogICAgICAgIHNlc3Npb25TdG9yYWdlLnNldEl0ZW0oIm1lc3NhZ2VfaGlzdG9yeSIsIEpTT04uc3RyaW5naWZ5KG1lc3NhZ2VzKSk7IC8vIDwtIFNhdmUgaGlzdG9yeSBpZiB0aGUgZmVhdHVyZSBpcyBlbmFibGVkDQogICAgfSwNCiAgICAvKiBUaGlzIGZ1bmN0aW9uIGlzIHRyaWdnZXJlZCwgd2hlbiByZXF1ZXN0IGlzIHN0YXJ0ZWQgb3IgZmluaXNoZWQgKi8NCiAgICBsb2FkaW5nKCkgew0KICAgICAgc2V0VGltZW91dCgoKSA9PiB7DQogICAgICAgIGNvbnN0IGFwcCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoIiNhcHAiKTsgLy8gPC0gV2UgbmVlZCB0byBzY3JvbGwgZG93biAjYXBwLCB0byBwcmV2ZW50IHRoZSB3aG9sZSBwYWdlIGp1bXBpbmcgdG8gYm90dG9tLCB3aGVuIHVzaW5nIGluIGlmcmFtZQ0KICAgICAgICBpZiAoYXBwLnF1ZXJ5U2VsZWN0b3IoIiNtZXNzYWdlIikpIHsNCiAgICAgICAgICBjb25zdCBtZXNzYWdlID0NCiAgICAgICAgICAgIGFwcC5xdWVyeVNlbGVjdG9yQWxsKCIjbWVzc2FnZSIpWw0KICAgICAgICAgICAgICBhcHAucXVlcnlTZWxlY3RvckFsbCgiI21lc3NhZ2UiKS5sZW5ndGggLSAxDQogICAgICAgICAgICBdLm9mZnNldFRvcCAtIDY4Ow0KICAgICAgICAgIHdpbmRvdy5zY3JvbGxUbyh7IHRvcDogbWVzc2FnZSwgYmVoYXZpb3I6ICJzbW9vdGgiIH0pOw0KICAgICAgICB9DQogICAgICB9LCAyKTsgLy8gPC0gd2FpdCBmb3IgcmVuZGVyICh0aW1lb3V0KSBhbmQgdGhlbiBzbW9vdGhseSBzY3JvbGwgI2FwcCBkb3duIHRvIHRoZSBsYXN0IG1lc3NhZ2UNCiAgICB9LA0KICB9LA0KICBjcmVhdGVkKCkgew0KICAgIC8qIElmIGhpc3RvcnkgaXMgZW5hYmxlZCwgdGhlIG1lc3NhZ2VzIGFyZSByZXRyaWV2ZWQgZnJvbSBzZXNzaW9uU3RvcmFnZSAqLw0KICAgIGlmICh0aGlzLmhpc3RvcnkoKSAmJiBzZXNzaW9uU3RvcmFnZS5nZXRJdGVtKCJtZXNzYWdlX2hpc3RvcnkiKSAhPT0gbnVsbCkgew0KICAgICAgdGhpcy5tZXNzYWdlcyA9IEpTT04ucGFyc2Uoc2Vzc2lvblN0b3JhZ2UuZ2V0SXRlbSgibWVzc2FnZV9oaXN0b3J5IikpOw0KICAgIH0NCg0KICAgIC8qIFNlc3Npb24gc2hvdWxkIGJlIHBlcnNpc3RlbnQgKGluIGNhc2Ugb2YgcGFnZSByZWxvYWQsIHRoZSBjb250ZXh0IHNob3VsZCBzdGF5KSAqLw0KICAgIGlmICh0aGlzLmhpc3RvcnkoKSAmJiBzZXNzaW9uU3RvcmFnZS5nZXRJdGVtKCJzZXNzaW9uIikgIT09IG51bGwpIHsNCiAgICAgIHRoaXMuc2Vzc2lvbiA9IHNlc3Npb25TdG9yYWdlLmdldEl0ZW0oInNlc3Npb24iKTsNCiAgICB9IGVsc2Ugew0KICAgICAgdGhpcy5zZXNzaW9uID0gdXVpZHYxKCk7DQogICAgICBpZiAodGhpcy5oaXN0b3J5KCkpIHNlc3Npb25TdG9yYWdlLnNldEl0ZW0oInNlc3Npb24iLCB0aGlzLnNlc3Npb24pOw0KICAgIH0NCg0KICAgIC8qIENhY2hlIEFnZW50ICh0aGlzIHdpbGwgc2F2ZSBiYW5kd2l0aCkgKi8NCiAgICBpZiAodGhpcy5oaXN0b3J5KCkgJiYgc2Vzc2lvblN0b3JhZ2UuZ2V0SXRlbSgiYWdlbnQiKSAhPT0gbnVsbCkgew0KICAgICAgdGhpcy5hcHAgPSBKU09OLnBhcnNlKHNlc3Npb25TdG9yYWdlLmdldEl0ZW0oImFnZW50IikpOw0KICAgIH0gZWxzZSB7DQogICAgfQ0KICB9LA0KICBtZXRob2RzOiB7DQogICAgc2VuZChzdWJtaXNzaW9uKSB7DQogICAgICBsZXQgcmVxdWVzdDsNCg0KICAgICAgLyogVGV4dCByZXF1ZXN0ICovDQogICAgICBpZiAoc3VibWlzc2lvbi50ZXh0KSB7DQogICAgICAgIHJlcXVlc3QgPSB7DQogICAgICAgICAgc2Vzc2lvbjogdGhpcy5zZXNzaW9uLA0KICAgICAgICAgIHF1ZXJ5SW5wdXQ6IHsNCiAgICAgICAgICAgIHRleHQ6IHsNCiAgICAgICAgICAgICAgdGV4dDogc3VibWlzc2lvbi50ZXh0LA0KICAgICAgICAgICAgICBsYW5ndWFnZUNvZGU6IHRoaXMubGFuZygpLA0KICAgICAgICAgICAgfSwNCiAgICAgICAgICB9LA0KICAgICAgICB9Ow0KICAgICAgfSBlbHNlIGlmIChzdWJtaXNzaW9uLmF1ZGlvKSB7DQoNCiAgICAgIC8qIEF1ZGlvIHJlcXVlc3QgKi8NCiAgICAgICAgcmVxdWVzdCA9IHsNCiAgICAgICAgICBzZXNzaW9uOiB0aGlzLnNlc3Npb24sDQogICAgICAgICAgcXVlcnlJbnB1dDogew0KICAgICAgICAgICAgYXVkaW9Db25maWc6IHsNCiAgICAgICAgICAgICAgYXVkaW9FbmNvZGluZzogIkFVRElPX0VOQ09ESU5HX1VOU1BFQ0lGSUVEIiwNCiAgICAgICAgICAgICAgbGFuZ3VhZ2VDb2RlOiB0aGlzLmxhbmcoKSwNCiAgICAgICAgICAgIH0sDQogICAgICAgICAgfSwNCiAgICAgICAgICBpbnB1dEF1ZGlvOiBzdWJtaXNzaW9uLmF1ZGlvLA0KICAgICAgICB9Ow0KICAgICAgfQ0KDQogICAgICB0aGlzLmxvYWRpbmcgPSB0cnVlOw0KICAgICAgdGhpcy5lcnJvciA9IG51bGw7DQoNCiAgICAgIC8qIE1ha2UgdGhlIHJlcXVlc3QgdG8gZ2F0ZXdheSAqLw0KICAgICAgdGhpcy5jbGllbnQNCiAgICAgICAgLnNlbmQocmVxdWVzdCkNCiAgICAgICAgLnRoZW4oKHJlc3BvbnNlKSA9PiB7DQogICAgICAgICAgaWYgKHJlc3BvbnNlLnF1ZXJ5UmVzdWx0LmZ1bGZpbGxtZW50VGV4dCkgew0KICAgICAgICAgICAgcmVzcG9uc2UucXVlcnlSZXN1bHQuZnVsZmlsbG1lbnRUZXh0ID0gdXJsaWZ5KA0KICAgICAgICAgICAgICByZXNwb25zZS5xdWVyeVJlc3VsdC5mdWxmaWxsbWVudFRleHQNCiAgICAgICAgICAgICk7DQogICAgICAgICAgfQ0KICAgICAgICAgIHRoaXMubWVzc2FnZXMucHVzaChyZXNwb25zZSk7DQogICAgICAgICAgdGhpcy5oYW5kbGUocmVzcG9uc2UpOyAvLyA8LSB0cmlnZ2VyIHRoZSBoYW5kbGUgZnVuY3Rpb24gKGV4cGxhbmF0aW9uIGJlbG93KQ0KICAgICAgICB9KQ0KICAgICAgICAuY2F0Y2goKGVycm9yKSA9PiB7DQogICAgICAgICAgdGhpcy5lcnJvciA9IGVycm9yLm1lc3NhZ2U7DQogICAgICAgIH0pDQogICAgICAgIC50aGVuKCgpID0+ICh0aGlzLmxvYWRpbmcgPSBmYWxzZSkpOw0KICAgIH0sDQogICAgaGFuZGxlKHJlc3BvbnNlKSB7DQogICAgICAvKiBUaGlzIGZ1bmN0aW9uIGlzIHVzZWQgZm9yIHNwZWVjaCBvdXRwdXQgKi8NCiAgICAgIGlmIChyZXNwb25zZS5vdXRwdXRBdWRpbykgew0KICAgICAgICBjb25zdCBvdXRwdXQgPSBuZXcgQXVkaW8oDQogICAgICAgICAgYGRhdGE6YXVkaW8vbXAzO2Jhc2U2NCwke3Jlc3BvbnNlLm91dHB1dEF1ZGlvfWANCiAgICAgICAgKTsNCiAgICAgICAgb3V0cHV0Lm9uZW5kZWQgPSAoKSA9PiB0aGlzLiRyZWZzLmlucHV0Lmxpc3RlbigpOw0KDQogICAgICAgIGlmICghdGhpcy5tdXRlZCkgb3V0cHV0LnBsYXkoKTsNCiAgICAgIH0gZWxzZSB7DQogICAgICAgIGxldCB0ZXh0OyAvLyA8LSBpbml0IGEgdGV4dCB2YXJpYWJsZQ0KDQogICAgICAgIC8qIERpYWxvZ2Zsb3cgVGV4dC9TaW1wbGVSZXNwb25zZXMgKi8NCiAgICAgICAgZm9yIChjb25zdCBjb21wb25lbnQgaW4gcmVzcG9uc2UucXVlcnlSZXN1bHQuZnVsZmlsbG1lbnRNZXNzYWdlcykgew0KICAgICAgICAgIGlmIChyZXNwb25zZS5xdWVyeVJlc3VsdC5mdWxmaWxsbWVudE1lc3NhZ2VzW2NvbXBvbmVudF0udGV4dCkNCiAgICAgICAgICAgIHRleHQgPQ0KICAgICAgICAgICAgICByZXNwb25zZS5xdWVyeVJlc3VsdC5mdWxmaWxsbWVudE1lc3NhZ2VzW2NvbXBvbmVudF0udGV4dC50ZXh0WzBdOw0KICAgICAgICAgIGlmICgNCiAgICAgICAgICAgIHJlc3BvbnNlLnF1ZXJ5UmVzdWx0LmZ1bGZpbGxtZW50TWVzc2FnZXNbY29tcG9uZW50XS5zaW1wbGVSZXNwb25zZXMNCiAgICAgICAgICApDQogICAgICAgICAgICB0ZXh0ID0NCiAgICAgICAgICAgICAgcmVzcG9uc2UucXVlcnlSZXN1bHQuZnVsZmlsbG1lbnRNZXNzYWdlc1tjb21wb25lbnRdDQogICAgICAgICAgICAgICAgLnNpbXBsZVJlc3BvbnNlcy5zaW1wbGVSZXNwb25zZXNbMF0udGV4dFRvU3BlZWNoOw0KICAgICAgICB9DQoNCiAgICAgICAgLyogQWN0aW9ucyBvbiBHb29nbGUgU2ltcGxlIHJlc3BvbnNlICovDQogICAgICAgIGlmICgNCiAgICAgICAgICByZXNwb25zZS5xdWVyeVJlc3VsdC53ZWJob29rUGF5bG9hZCAmJg0KICAgICAgICAgIHJlc3BvbnNlLnF1ZXJ5UmVzdWx0LndlYmhvb2tQYXlsb2FkLmdvb2dsZQ0KICAgICAgICApIHsNCiAgICAgICAgICBmb3IgKGNvbnN0IGNvbXBvbmVudCBpbiByZXNwb25zZS5xdWVyeVJlc3VsdC53ZWJob29rUGF5bG9hZC5nb29nbGUpIHsNCiAgICAgICAgICAgIGlmICgNCiAgICAgICAgICAgICAgcmVzcG9uc2UucXVlcnlSZXN1bHQud2ViaG9va1BheWxvYWQuZ29vZ2xlW2NvbXBvbmVudF0NCiAgICAgICAgICAgICAgICAuc2ltcGxlUmVzcG9uc2UNCiAgICAgICAgICAgICkNCiAgICAgICAgICAgICAgdGV4dCA9DQogICAgICAgICAgICAgICAgcmVzcG9uc2UucXVlcnlSZXN1bHQud2ViaG9va1BheWxvYWQuZ29vZ2xlW2NvbXBvbmVudF0NCiAgICAgICAgICAgICAgICAgIC5zaW1wbGVSZXNwb25zZS50ZXh0VG9TcGVlY2g7DQogICAgICAgICAgfQ0KICAgICAgICB9DQoNCiAgICAgICAgY29uc3Qgc3BlZWNoID0gbmV3IFNwZWVjaFN5bnRoZXNpc1V0dGVyYW5jZSh0ZXh0KTsNCiAgICAgICAgc3BlZWNoLnZvaWNlVVJJID0gdGhpcy5jb25maWcudm9pY2U7DQogICAgICAgIHNwZWVjaC5sYW5nID0gdGhpcy5sYW5nKCk7DQogICAgICAgIHNwZWVjaC5vbmVuZCA9ICgpID0+IHRoaXMuJHJlZnMuaW5wdXQubGlzdGVuKCk7DQoNCiAgICAgICAgaWYgKCF0aGlzLm11dGVkKSB3aW5kb3cuc3BlZWNoU3ludGhlc2lzLnNwZWFrKHNwZWVjaCk7IC8vIDwtIGlmIGFwcCBpcyBub3QgbXV0ZWQsIHNwZWFrIG91dCB0aGUgc3BlZWNoDQogICAgICB9DQogICAgfSwNCiAgfSwNCn07DQo="},{"version":3,"sources":["App.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAyMA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA","file":"App.vue","sourceRoot":"src/Views","sourcesContent":["<template>\r\n  <main id=\"app\">\r\n    <!-- TopHead is the header with the information about the app -->\r\n    <TopHead>\r\n      <!-- Audio toggle (on the top right corner), used to toggle the audio output, default mode is defined in the settings -->\r\n      <!--<button\r\n        class=\"audio-toggle\"\r\n        :title=\"\r\n          muted\r\n            ? (translations[lang()] && translations[lang()].unMuteTitle) ||\r\n              translations[config.fallback_lang].unMuteTitle\r\n            : (translations[lang()] && translations[lang()].muteTitle) ||\r\n              translations[config.fallback_lang].muteTitle\r\n        \"\r\n        :aria-label=\"\r\n          muted\r\n            ? (translations[lang()] && translations[lang()].unMuteTitle) ||\r\n              translations[config.fallback_lang].unMuteTitle\r\n            : (translations[lang()] && translations[lang()].muteTitle) ||\r\n              translations[config.fallback_lang].muteTitle\r\n        \"\r\n        @click=\"muted = !muted\"\r\n      >\r\n        <i aria-hidden=\"true\" class=\"material-icons\">{{\r\n          muted ? \"volume_off\" : \"volume_up\"\r\n        }}</i>\r\n      </button>-->\r\n    </TopHead>\r\n\r\n    <section class=\"container chat-container\">\r\n      <Error v-if=\"error\" :error=\"error\" />\r\n\r\n      <RichComponent>\r\n        <Bubble\r\n          :text=\"'Test'\"\r\n        />\r\n      </RichComponent>\r\n      <!-- Messages Table -->\r\n      <section v-if=\"messages\" aria-live=\"polite\">\r\n        <div v-for=\"message in messages\" id=\"message\" :key=\"message.responseId\">\r\n          <!-- My message -->\r\n          <BubbleWrapper\r\n            ><Bubble\r\n              v-if=\"message.queryResult.queryText\"\r\n              :text=\"message.queryResult.queryText\"\r\n              me\r\n          /></BubbleWrapper>\r\n\r\n          <!-- Fulfillment text -->\r\n          <RichComponent>\r\n            <Bubble\r\n              v-if=\"message.queryResult.fulfillmentText\"\r\n              :text=\"message.queryResult.fulfillmentText\"\r\n            />\r\n          </RichComponent>\r\n\r\n          <!-- Dialogflow Components -->\r\n          <RichComponent\r\n            v-for=\"(component, component_id) in message.queryResult\r\n              .fulfillmentMessages\"\r\n            :key=\"component_id\"\r\n          >\r\n            <!-- ListSelect (https://cloud.google.com/dialogflow/docs/reference/rest/v2beta1/projects.agent.intents#ListSelect) -->\r\n            <List\r\n              v-if=\"component.listSelect\"\r\n              :title=\"component.listSelect.title\"\r\n              :subtitle=\"component.listSelect.subtitle\"\r\n            >\r\n              <ListItem\r\n                v-for=\"item in component.listSelect.items\"\r\n                :key=\"item.info.key\"\r\n                :title=\"item.title\"\r\n                :description=\"item.description\"\r\n                :image-uri=\"item.image.imageUri\"\r\n                :image-title=\"item.image.accessibilityText\"\r\n                @click.native=\"send({ text: item.info.key })\"\r\n              />\r\n            </List>\r\n          </RichComponent>\r\n\r\n          <!-- Actions on Google Components -->\r\n          <section\r\n            v-if=\"\r\n              message.queryResult.webhookPayload &&\r\n              message.queryResult.webhookPayload.google\r\n            \"\r\n          >\r\n            <RichComponent\r\n              v-for=\"(component, component_id) in message.queryResult\r\n                .webhookPayload.google.richResponse.items\"\r\n              :key=\"component_id\"\r\n            >\r\n              <!-- List (https://developers.google.com/actions/assistant/responses#list) -->\r\n              <List\r\n                v-if=\"component.listSelect\"\r\n                :title=\"component.listSelect.title\"\r\n                :subtitle=\"component.listSelect.subtitle\"\r\n              >\r\n                <ListItem\r\n                  v-for=\"item in component.listSelect.items\"\r\n                  :key=\"item.info.key\"\r\n                  :title=\"item.title\"\r\n                  :description=\"item.description\"\r\n                  :image-uri=\"item.image.url\"\r\n                  :image-title=\"item.image.accessibilityText\"\r\n                  @click.native=\"send({ text: item.info.key })\"\r\n                />\r\n              </List>\r\n            </RichComponent>\r\n\r\n            <!-- Visual Selection Responses (https://developers.google.com/actions/assistant/responses#visual_selection_responses) -->\r\n            <RichComponent\r\n              v-for=\"(component, component_id) in message.queryResult\r\n                .webhookPayload.google.systemIntent\"\r\n              :key=\"component_id\"\r\n            >\r\n              <!-- List (https://developers.google.com/actions/assistant/responses#list) -->\r\n              <List\r\n                v-if=\"component.listSelect\"\r\n                :title=\"component.listSelect.title\"\r\n                :subtitle=\"component.listSelect.subtitle\"\r\n              >\r\n                <ListItem\r\n                  v-for=\"item in component.listSelect.items\"\r\n                  :key=\"item.optionInfo.key\"\r\n                  :title=\"item.title\"\r\n                  :description=\"item.description\"\r\n                  :image-uri=\"item.image.url\"\r\n                  :image-title=\"item.image.accessibilityText\"\r\n                  @click.native=\"send({ text: item.optionInfo.key })\"\r\n                />\r\n              </List>\r\n            </RichComponent>\r\n          </section>\r\n        </div>\r\n        <div v-if=\"loading\" id=\"message\">\r\n          <!-- My message (Loading) -->\r\n          <BubbleWrapper\r\n            ><Bubble me loading aria-hidden=\"true\"\r\n          /></BubbleWrapper>\r\n\r\n          <!-- Default / Webhook bubble (Loading) -->\r\n          <Bubble loading aria-hidden=\"true\" />\r\n        </div>\r\n      </section>\r\n    </section>\r\n\r\n    <!-- ChatInput is made for submitting queries and displaying suggestions -->\r\n    <ChatInput ref=\"input\" @submit=\"send\">\r\n      <!-- Suggestion chips\r\n                https://developers.google.com/actions/assistant/responses#suggestion_chips\r\n                https://cloud.google.com/dialogflow/docs/reference/rest/v2beta1/projects.agent.intents#QuickReplies\r\n                https://cloud.google.com/dialogflow/docs/reference/rest/v2beta1/projects.agent.intents#Suggestions\r\n            -->\r\n      <Suggestion\r\n        v-for=\"(suggestion, suggestion_id) in suggestions.text_suggestions\"\r\n        :key=\"suggestion_id\"\r\n        :title=\"suggestion\"\r\n        @click.native=\"send({ text: suggestion })\"\r\n      />\r\n\r\n      <!-- Link suggestion chips\r\n                https://developers.google.com/actions/assistant/responses#suggestion_chips\r\n                https://cloud.google.com/dialogflow/docs/reference/rest/v2beta1/projects.agent.intents#LinkOutSuggestion\r\n            -->\r\n      <Suggestion\r\n        v-if=\"suggestions.link_suggestion\"\r\n        :title=\"suggestions.link_suggestion.destinationName\"\r\n        :url=\"\r\n          suggestions.link_suggestion.uri || suggestions.link_suggestion.url\r\n        \"\r\n      />\r\n    </ChatInput>\r\n  </main>\r\n</template>\r\n\r\n<style lang=\"sass\">\r\n@import '@/Style/Theme.sass'\r\n\r\nbody\r\n    margin: 0\r\n    padding: 0\r\n    font-family: var(--font)\r\n    font-display: swap\r\n    background-color: var(--background)\r\n\r\n.container\r\n    max-width: 500px\r\n    margin-left: auto\r\n    margin-right: auto\r\n    padding: 12px\r\n    position: relative\r\n</style>\r\n\r\n<style lang=\"sass\" scoped>\r\n.chat-container\r\n    padding-top: 70px\r\n    padding-bottom: 125px\r\n</style>\r\n\r\n<script>\r\nimport Welcome from \"./Welcome.vue\";\r\n\r\nimport Error from \"@/Components/Parts/Error.vue\";\r\nimport TopHead from \"@/Components/Parts/TopHead.vue\";\r\nimport ChatInput from \"@/Components/Parts/ChatInput.vue\";\r\n\r\nimport RichComponent from \"@/Components/Rich/Component.vue\";\r\nimport Bubble from \"@/Components/Rich/Bubble.vue\";\r\nimport BubbleWrapper from \"@/Components/Rich/BubbleWrapper.vue\";\r\nimport Card from \"@/Components/Rich/Card.vue\";\r\nimport CardButton from \"@/Components/Rich/CardButton.vue\";\r\nimport Carousel from \"@/Components/Rich/Carousel.vue\";\r\nimport List from \"@/Components/Rich/List.vue\";\r\nimport ListItem from \"@/Components/Rich/ListItem.vue\";\r\nimport Picture from \"@/Components/Rich/Picture.vue\";\r\nimport Media from \"@/Components/Rich/Media.vue\";\r\nimport TableCard from \"@/Components/Rich/TableCard.vue\";\r\nimport Suggestion from \"@/Components/Rich/Suggestion.vue\";\r\n\r\nimport * as uuidv1 from \"uuid/v1\";\r\n\r\nimport { Client } from \"dialogflow-gateway\";\r\n\r\nfunction urlify(text) {\r\n  var urlRegex = /(\\b(https?|ftp|file):\\/\\/[-A-Z0-9+&@#\\/%?=~_|!:,.;]*[-A-Z0-9+&@#\\/%=~_|])/gi;\r\n  return text.replace(urlRegex, function (url) {\r\n    return '<a class=\"b\" href=\"' + url + '\" target=\"_blank\">' + url + \"</a>\";\r\n  });\r\n  // or alternatively\r\n  // return text.replace(urlRegex, '<a href=\"$1\">$1</a>')\r\n}\r\n\r\nexport default {\r\n  name: \"App\",\r\n  components: {\r\n    Welcome,\r\n    Error,\r\n    TopHead,\r\n    ChatInput,\r\n    RichComponent,\r\n    Bubble,\r\n    BubbleWrapper,\r\n    Card,\r\n    CardButton,\r\n    Carousel,\r\n    List,\r\n    ListItem,\r\n    Picture,\r\n    Media,\r\n    TableCard,\r\n    Suggestion,\r\n  },\r\n  data() {\r\n    return {\r\n      app: null,\r\n      messages: [],\r\n      language: \"\",\r\n      session: \"\",\r\n      muted: true,\r\n      loading: false,\r\n      error: null,\r\n      client: new new Client(this.config.endpoint).connect(),\r\n    };\r\n  },\r\n  computed: {\r\n    /* The code below is used to extract suggestions from last message, to display it on ChatInput */\r\n    suggestions() {\r\n      if (this.messages.length > 0) {\r\n        const last_message = this.messages[this.messages.length - 1];\r\n        const suggestions = [];\r\n\r\n        /* Dialogflow Suggestions */\r\n        for (const component in last_message.queryResult.fulfillmentMessages) {\r\n          if (\r\n            last_message.queryResult.fulfillmentMessages[component].suggestions\r\n          )\r\n            suggestions.text_suggestions = last_message.queryResult.fulfillmentMessages[\r\n              component\r\n            ].suggestions.suggestions.map((suggestion) => suggestion.title);\r\n          if (\r\n            last_message.queryResult.fulfillmentMessages[component]\r\n              .linkOutSuggestion\r\n          )\r\n            suggestions.link_suggestion =\r\n              last_message.queryResult.fulfillmentMessages[\r\n                component\r\n              ].linkOutSuggestion;\r\n          if (\r\n            last_message.queryResult.fulfillmentMessages[component].quickReplies\r\n          )\r\n            suggestions.text_suggestions =\r\n              last_message.queryResult.fulfillmentMessages[\r\n                component\r\n              ].quickReplies.quickReplies;\r\n        }\r\n\r\n        /* Google Suggestions */\r\n        if (\r\n          last_message.queryResult.webhookPayload &&\r\n          last_message.queryResult.webhookPayload.google\r\n        ) {\r\n          for (const component in last_message.queryResult.webhookPayload\r\n            .google) {\r\n            if (\r\n              last_message.queryResult.webhookPayload.google[component]\r\n                .suggestions\r\n            )\r\n              suggestions.text_suggestions = last_message.queryResult.webhookPayload.google[\r\n                component\r\n              ].suggestions.map((suggestion) => suggestion.title);\r\n            if (\r\n              last_message.queryResult.webhookPayload.google[component]\r\n                .linkOutSuggestion\r\n            )\r\n              suggestions.link_suggestion =\r\n                last_message.queryResult.webhookPayload.google[\r\n                  component\r\n                ].linkOutSuggestion;\r\n          }\r\n        }\r\n\r\n        return suggestions;\r\n      }\r\n\r\n      return {\r\n        text_suggestions: this.config.start_suggestions, // <- if no messages are present, return start_suggestions, from config.js to help user figure out what he can do with your application\r\n      };\r\n    },\r\n  },\r\n  watch: {\r\n    /* This function is triggered, when new messages arrive */\r\n    messages(messages) {\r\n      if (this.history())\r\n        sessionStorage.setItem(\"message_history\", JSON.stringify(messages)); // <- Save history if the feature is enabled\r\n    },\r\n    /* This function is triggered, when request is started or finished */\r\n    loading() {\r\n      setTimeout(() => {\r\n        const app = document.querySelector(\"#app\"); // <- We need to scroll down #app, to prevent the whole page jumping to bottom, when using in iframe\r\n        if (app.querySelector(\"#message\")) {\r\n          const message =\r\n            app.querySelectorAll(\"#message\")[\r\n              app.querySelectorAll(\"#message\").length - 1\r\n            ].offsetTop - 68;\r\n          window.scrollTo({ top: message, behavior: \"smooth\" });\r\n        }\r\n      }, 2); // <- wait for render (timeout) and then smoothly scroll #app down to the last message\r\n    },\r\n  },\r\n  created() {\r\n    /* If history is enabled, the messages are retrieved from sessionStorage */\r\n    if (this.history() && sessionStorage.getItem(\"message_history\") !== null) {\r\n      this.messages = JSON.parse(sessionStorage.getItem(\"message_history\"));\r\n    }\r\n\r\n    /* Session should be persistent (in case of page reload, the context should stay) */\r\n    if (this.history() && sessionStorage.getItem(\"session\") !== null) {\r\n      this.session = sessionStorage.getItem(\"session\");\r\n    } else {\r\n      this.session = uuidv1();\r\n      if (this.history()) sessionStorage.setItem(\"session\", this.session);\r\n    }\r\n\r\n    /* Cache Agent (this will save bandwith) */\r\n    if (this.history() && sessionStorage.getItem(\"agent\") !== null) {\r\n      this.app = JSON.parse(sessionStorage.getItem(\"agent\"));\r\n    } else {\r\n    }\r\n  },\r\n  methods: {\r\n    send(submission) {\r\n      let request;\r\n\r\n      /* Text request */\r\n      if (submission.text) {\r\n        request = {\r\n          session: this.session,\r\n          queryInput: {\r\n            text: {\r\n              text: submission.text,\r\n              languageCode: this.lang(),\r\n            },\r\n          },\r\n        };\r\n      } else if (submission.audio) {\r\n\r\n      /* Audio request */\r\n        request = {\r\n          session: this.session,\r\n          queryInput: {\r\n            audioConfig: {\r\n              audioEncoding: \"AUDIO_ENCODING_UNSPECIFIED\",\r\n              languageCode: this.lang(),\r\n            },\r\n          },\r\n          inputAudio: submission.audio,\r\n        };\r\n      }\r\n\r\n      this.loading = true;\r\n      this.error = null;\r\n\r\n      /* Make the request to gateway */\r\n      this.client\r\n        .send(request)\r\n        .then((response) => {\r\n          if (response.queryResult.fulfillmentText) {\r\n            response.queryResult.fulfillmentText = urlify(\r\n              response.queryResult.fulfillmentText\r\n            );\r\n          }\r\n          this.messages.push(response);\r\n          this.handle(response); // <- trigger the handle function (explanation below)\r\n        })\r\n        .catch((error) => {\r\n          this.error = error.message;\r\n        })\r\n        .then(() => (this.loading = false));\r\n    },\r\n    handle(response) {\r\n      /* This function is used for speech output */\r\n      if (response.outputAudio) {\r\n        const output = new Audio(\r\n          `data:audio/mp3;base64,${response.outputAudio}`\r\n        );\r\n        output.onended = () => this.$refs.input.listen();\r\n\r\n        if (!this.muted) output.play();\r\n      } else {\r\n        let text; // <- init a text variable\r\n\r\n        /* Dialogflow Text/SimpleResponses */\r\n        for (const component in response.queryResult.fulfillmentMessages) {\r\n          if (response.queryResult.fulfillmentMessages[component].text)\r\n            text =\r\n              response.queryResult.fulfillmentMessages[component].text.text[0];\r\n          if (\r\n            response.queryResult.fulfillmentMessages[component].simpleResponses\r\n          )\r\n            text =\r\n              response.queryResult.fulfillmentMessages[component]\r\n                .simpleResponses.simpleResponses[0].textToSpeech;\r\n        }\r\n\r\n        /* Actions on Google Simple response */\r\n        if (\r\n          response.queryResult.webhookPayload &&\r\n          response.queryResult.webhookPayload.google\r\n        ) {\r\n          for (const component in response.queryResult.webhookPayload.google) {\r\n            if (\r\n              response.queryResult.webhookPayload.google[component]\r\n                .simpleResponse\r\n            )\r\n              text =\r\n                response.queryResult.webhookPayload.google[component]\r\n                  .simpleResponse.textToSpeech;\r\n          }\r\n        }\r\n\r\n        const speech = new SpeechSynthesisUtterance(text);\r\n        speech.voiceURI = this.config.voice;\r\n        speech.lang = this.lang();\r\n        speech.onend = () => this.$refs.input.listen();\r\n\r\n        if (!this.muted) window.speechSynthesis.speak(speech); // <- if app is not muted, speak out the speech\r\n      }\r\n    },\r\n  },\r\n};\r\n</script>\r\n"]}]}